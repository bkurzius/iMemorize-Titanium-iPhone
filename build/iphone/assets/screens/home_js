var Home={inited:!1,fontFamily:"Helvetica Neue",width:{},height:{},appVersionNumber:{},xhr:"",dontRemindVersionAlert:!1,buttonStyleHeight:35,buttonStyleWidth:200,logoHeight:74,logoWidth:74,toolbarHeight:55,closeBtnHeight:30,closeBtnTop:20,marginTopPortrait:60,marginTopLandscape:10,orientationModes:{},win:{},logo:"",HTML:{},uiWin:{},toolBar:{},startBtn:{},enterQuoteBtn:{},instructionsBtn:{},aboutBtn:{},buttonGradient:{type:"linear",colors:["#888888","#000001"],startPoint:{x:0,y:0},endPoint:{x:0,y:40},backFillStart:!1},closeButtonGradient:{type:"linear",colors:["#FEFEFE","#898989"],startPoint:{x:0,y:0},endPoint:{x:0,y:50},backFillStart:!1},uiWindowGradient:{type:"linear",colors:["#888888","#000001"],startPoint:{x:0,y:0},backFillStart:!1},toolbarGradient:{type:"linear",colors:["#888888","#000001"],startPoint:{x:0,y:0},endPoint:{x:0,y:60},backFillStart:!1},buttonStyle:{width:200,height:40,borderRadius:10,backgroundSelectedImage:"../images/black-bg.png",borderWidth:1,borderColor:"#666"}};Home.init=function(){Home.win=Ti.UI.createWindow({layout:"vertical",backgroundColor:"#662211",backgroundImage:"images/"+TiUtils.getOsName()+"-images/bg.png",statusBarStyle:Titanium.UI.iPhone.StatusBar.LIGHT_CONTENT,fullscreen:!0}),Home.width=Titanium.Platform.displayCaps.platformWidth,Home.height=Titanium.Platform.displayCaps.platformHeight,Home.appVersionNumber=Titanium.App.Properties.getString("appVersionNumber_preference"),Home.orientationModes=[Titanium.UI.LANDSCAPE_LEFT,Titanium.UI.LANDSCAPE_RIGHT,Titanium.UI.PORTRAIT,Titanium.UI.UPSIDE_PORTRAIT],Home.uiWindowGradient.endPoint={x:0,y:Home.height},Home.buttonStyle.backgroundGradient=Home.buttonGradient,Home.buttonStyle.font={fontSize:16,fontFamily:Home.fontFamily,fontWeight:"bold"},Home.draw(),Home.checkVersion()},Home.draw=function(){Ti.Platform.osname;Titanium.API.info("home build 1"),Home.logo=Ti.UI.createImageView({image:"images/"+TiUtils.getOsName()+"-images/logo.png",height:Home.logoHeight,width:Home.logoHeight}),Home.startBtn=Ti.UI.createButton({borderRadius:10,font:{fontSize:16,fontFamily:AddQuote._fontFamily,fontWeight:"bold"}}),Home.startBtn.title="Choose Quote",Home.startBtn.height=Home.buttonStyleHeight,Home.startBtn.width=Home.buttonStyleWidth,Home.startBtn.top=5,Home.enterQuoteBtn=Ti.UI.createButton({borderRadius:10,font:{fontSize:16,fontFamily:AddQuote._fontFamily,fontWeight:"bold"}}),Home.enterQuoteBtn.title="Enter your own quote",Home.enterQuoteBtn.height=Home.buttonStyleHeight,Home.enterQuoteBtn.width=Home.buttonStyleWidth,Home.enterQuoteBtn.top=5,Home.instructionsBtn=Ti.UI.createButton({borderRadius:10,font:{fontSize:16,fontFamily:AddQuote._fontFamily,fontWeight:"bold"}}),Home.instructionsBtn.title="Instructions",Home.instructionsBtn.height=Home.buttonStyleHeight,Home.instructionsBtn.width=Home.buttonStyleWidth,Home.instructionsBtn.top=5,Home.aboutBtn=Ti.UI.createButton({borderRadius:10,font:{fontSize:16,fontFamily:AddQuote._fontFamily,fontWeight:"bold"}}),Home.aboutBtn.title="About",Home.aboutBtn.height=Home.buttonStyleHeight,Home.aboutBtn.width=Home.buttonStyleWidth,Home.aboutBtn.top=5,Home.startBtn.style=Titanium.UI.iPhone.SystemButtonStyle.PLAIN,Home.enterQuoteBtn.style=Titanium.UI.iPhone.SystemButtonStyle.PLAIN,Home.instructionsBtn.style=Titanium.UI.iPhone.SystemButtonStyle.PLAIN,Home.aboutBtn.style=Titanium.UI.iPhone.SystemButtonStyle.PLAIN,Home.startBtn.backgroundGradient=Home.buttonGradient,Home.enterQuoteBtn.backgroundGradient=Home.buttonGradient,Home.instructionsBtn.backgroundGradient=Home.buttonGradient,Home.aboutBtn.backgroundGradient=Home.buttonGradient,Home.win.add(Home.logo),Home.win.add(Home.startBtn),Home.win.add(Home.enterQuoteBtn),Home.win.add(Home.instructionsBtn),Home.win.add(Home.aboutBtn),Home.setListeners(),Home.setLayout(),Home.win.open()},Home.showHome=function(){Home.init()},Home.hideHome=function(){Home.win.close()},Home.setLayout=function(){Titanium.API.info("Titanium.UI.orientation:"+TiUtils.getOrientation()),Home.logo.top="portrait"===TiUtils.getOrientation()?Home.marginTopPortrait:Home.marginTopLandscape,Home.startBtn.top=5,Home.enterQuoteBtn.top=5,Home.instructionsBtn.top=5,Home.aboutBtn.top=5},Home.resetLayout=function(){Titanium.API.info("Home resetLayout"),Home.logo.top="portrait"===TiUtils.getOrientation()?Home.marginTopPortrait:Home.marginTopLandscape,Home.startBtn.top=5,Home.enterQuoteBtn.top=5,Home.instructionsBtn.top=5,Home.aboutBtn.top=5,Home.win.height=Titanium.Platform.displayCaps.platformHeight-20,Home.win.width=Titanium.Platform.displayCaps.platformWidth,Home.uiWin.height=Titanium.Platform.displayCaps.platformHeight-20,Home.uiWin.width=Titanium.Platform.displayCaps.platformWidth,Home.HTML.height=Titanium.Platform.displayCaps.platformHeight-20,Home.HTML.width=Titanium.Platform.displayCaps.platformWidth,Home.toolBar.width=Titanium.Platform.displayCaps.platformWidth},Home.setListeners=function(){Titanium.API.info("home setListeners 1"),Home.startBtn.addEventListener("click",Home.startBtnClickListener),Home.enterQuoteBtn.addEventListener("click",Home.enterQuoteBtnClickListener),Home.instructionsBtn.addEventListener("click",Home.showInstructions),Home.aboutBtn.addEventListener("click",Home.showAbout),Ti.App.addEventListener("orientationChangeEvent",Home.resetLayout),Titanium.API.info("home setListeners 2")},Home.startBtnClickListener=function(){Titanium.App.fireEvent("showQuoteSelector",{})},Home.enterQuoteBtnClickListener=function(){Titanium.App.fireEvent("enterQuote",{})},Home.showInstructions=function(){Home.showUIWin("instructions.html")},Home.showAbout=function(){Home.showUIWin("about.html")},Home.showUIWin=function(e){Titanium.API.info("openUiWindow()"),Home.htmlWin=Titanium.UI.createWindow({height:TiUtils.getAppHeight()}),Home.HTML=Ti.UI.createWebView({url:e,top:Home.toolbarHeight,width:Home.width,height:Home.height-Home.toolbarHeight}),Home.HTML.orientationModes=Home.orientationModes,Home.toolBar=Ti.UI.createView({width:Home.width,height:Home.toolbarHeight,top:0,backgroundColor:"#000000"});var t=Ti.UI.createButton({title:"Close",width:100,height:Home.closeBtnHeight,top:Home.closeBtnTop,backgroundGradient:Home.closeButtonGradient,borderRadius:10,color:"#545454",font:{fontSize:16,fontFamily:Home.fontFamily,fontWeight:"bold"}});t.style=Titanium.UI.iPhone.SystemButtonStyle.PLAIN,t.addEventListener("click",function(){Home.hideUIWin()}),Home.toolBar.add(t),Home.htmlWin.add(Home.HTML),Home.htmlWin.add(Home.toolBar),Home.htmlWin.open()},Home.hideUIWin=function(){Home.htmlWin.close()},Home.checkVersion=function(){Home.xhr=Ti.Network.createHTTPClient(),Home.xhr.open("GET","http://www.imemorize.org/app_configs/"+TiUtils.getOsName()+"Config.xml"),Titanium.API.info("checkVersion()1"),Home.xhr.onload=function(){Titanium.API.info("xhr.onload()1");var e=this.responseXML.documentElement,t=e.evaluate("//config/versionNumber/text()").item(0).nodeValue,o=e.evaluate("//config/latestVersionDetails/text()").item(0).nodeValue;Titanium.API.info("xhr.onload()2");try{if(t!==Home.appVersionNumber){if(Titanium.API.info("xhr.onload()3"),"true"!==Titanium.App.Properties.getString("dontRemindMeVersion"+Home.appVersionNumber+"_preference")){var i=Titanium.UI.createAlertDialog({title:"New Version Available",message:o,buttonNames:["OK","Cancel","Don't remind me again"]});i.show(),i.addEventListener("click",function(e){var t;0===e.index?t="Download now!":2===e.index&&(Home.dontRemindVersionAlert=!0,t="don't remind me",Titanium.App.Properties.setString("dontRemindMeVersion"+Home.appVersionNumber+"_preference","true")),Titanium.API.info(t)})}Titanium.API.info("xhr.onload()4")}else Titanium.API.info("Version is up to date.")}catch(n){Titanium.API.info("error in checkVersion function")}},Home.xhr.send()};