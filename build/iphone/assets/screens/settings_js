var _orientationModes=[Titanium.UI.LANDSCAPE_LEFT,Titanium.UI.LANDSCAPE_RIGHT,Titanium.UI.PORTRAIT,Titanium.UI.UPSIDE_PORTRAIT],modal,modalWin,setSettingsListeners,setPickerData,handlePickerDoneBtnClick,handlePickerCancelBtnClick,handleModalDoneClick,handleTableClick,picker;settingsWin=Ti.UI.currentWindow,settingsWin.orientationModes=_orientationModes;var nav=Ti.UI.iPhone.createNavigationGroup({window:settingsWin}),table=Ti.UI.createTableView({style:Ti.UI.iPhone.TableViewStyle.GROUPED,data:[{title:"Add Quote",hasChild:!0,header:"Options and Settings"},{title:"Quote Font Size",hasChild:!0},{title:"Email Quote",hasChild:!0},{title:"Home",hasChild:!0,header:"Navigation"},{title:"Instructions",hasChild:!0},{title:"About",hasChild:!0}]}),picker_view=Titanium.UI.createView({height:251,bottom:-251}),picker_cancel_btn=Titanium.UI.createButton({title:"Cancel",style:Titanium.UI.iPhone.SystemButtonStyle.BORDERED}),picker_done_btn=Titanium.UI.createButton({title:"Done",style:Titanium.UI.iPhone.SystemButtonStyle.DONE}),spacer=Titanium.UI.createButton({systemButton:Titanium.UI.iPhone.SystemButton.FLEXIBLE_SPACE}),toolbar=Titanium.UI.createToolbar({top:0,items:[picker_cancel_btn,spacer,picker_done_btn]}),picker_data=[],fontSizes=[12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,47,50],setSettingsListeners,setPickerData,handlePickerDoneBtnClick,handlePickerCancelBtnClick,handleModalDoneClick,handleTableClick;setSettingsListeners=function(){picker_cancel_btn.addEventListener("click",handlePickerCancelBtnClick),picker_done_btn.addEventListener("click",handlePickerDoneBtnClick),modal_done_btn.addEventListener("click",handleModalDoneClick),table.addEventListener("click",handleTableClick),table2.addEventListener("click",handleTableClick)},setPickerData=function(){Titanium.API.info("build the picker data");var e=Titanium.App.Properties.getString("fontSize_preference");Titanium.API.info("font size preference:"+e);for(var t=0;t<fontSizes.length;t++)Titanium.API.info("fontSizes[i].toString(): "+fontSizes[t].toString()),fontSizes[t].toString()==e?(Titanium.API.info("!!!!COOL: set selected for this one"),Titanium.App.Properties.setString("fontSizeRowIndex_preference",t.toString()),picker_data.push(Titanium.UI.createPickerRow({title:fontSizes[t].toString(),selected:!0}))):(Titanium.API.info("Dont set selected for this one"),picker_data.push(Titanium.UI.createPickerRow({title:fontSizes[t].toString()})))},handlePickerDoneBtnClick=function(){picker_view.animate(slide_out),Titanium.App.fireEvent("fontSizeChanged",{data:picker.getSelectedRow(0).title}),Titanium.App.Properties.setString("fontSize_preference",picker.getSelectedRow(0).title)},handlePickerCancelBtnClick=function(){picker_view.animate(slide_out)},handleModalDoneClick=function(){modal.close(),win.orientationModes=_orientationModes},handleTableClick=function(e){var t=e.rowData.title;"Add Quote"===t?(Titanium.API.info("clicked Add Quote"),Titanium.App.Properties.setString("quoteEditAction_preference","add"),showQuoteEditor(),modal.close()):"Quote Font Size"===t?(Titanium.API.info("clicked Font Size"),picker_view.animate(slide_in),picker.setSelectedRow(0,Number(Titanium.App.Properties.getString("fontSizeRowIndex_preference"))),Titanium.API.info("font preference:"+Titanium.App.Properties.getString("fontSize_preference"))):"Email Quote"===t?emailQuote():"Home"===t?(hideGameButtons(),modal.close(),Titanium.App.fireEvent("showHome")):"About"===t?(hideGameButtons(),modal.close(),Titanium.App.fireEvent("showAbout")):"Instructions"===t&&showInstructions()},picker=Titanium.UI.createPicker({top:43,selectionIndicator:!0}),settingsWin.add(table),settingsWin.open(),settingsWin.add(picker_view);