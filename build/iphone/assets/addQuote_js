var AddQuote={inited:!1,ACTION_UPDATED:"QuoteEdited",ACTION_EDIT_LABEL_TEXT:"Edit quote:",ACTION_ADDED:"QuoteAdded",ACTION_ADD_LABEL_TEXT:"Add your quote:",ACTION_ADD_AND_MEMORIZE:"AddAndMemorize",ORIENTATION_PORTRAIT:"portrait",ORIENTATION_LANDSCAPE:"landscape",KEYBOARD_BOTTOM_PORTRAIT:112,KEYBOARD_BOTTOM_LANDSCAPE:160,_orientation:this.ORIENTATION_PORTRAIT,language_picker_data:[],languageArray:["Afrikaans","Albanian","Arabic","Armenian","Azerbaijani","Basque","Belarusian","Bulgarian","Catalan","Chinese","Croatian","Czech","Danish","Dutch","English","Estonian","Filipino","French","Galician","Georgian","German","Greek","Haitian Creole","Hebrew","Hindi","Hungarian","Icelandic","Indonesian","Irish","Italian","Japanese","Korean","Latvian","Lithuanian","Macedonian","Malay","Maltese","Norwegian","Persian","Polish","Portuguese","Romanian","Russian","Serbian","Slovak","Slovenian","Spanish","Swahili","Swedish","Thai","Turkish","Ukrainian","Urdu","Vietnamese","Welsh","Yiddish"],quoteLanguage:"English",labelText:"Add your quote",addButtonText:"Save",languagePref:"",_inputGap:10,iPhoneStatusBarHeight:20,_width:{},_height:{},_quotePromptText:"Quote",_authorPromptText:" Author",_sourcePromptText:" Reference",quoteText:"",authorText:"",sourceText:"",_action:"",_actionLabelText:"",keyboardOpened:!1,currOrientation:"",win:{},language_picker:{},quoteTxt:"",sourceTxt:"",authorTxt:"",language_picker_view:{},addButton:{},closeButton:{},cancelButton:{},drop_button:{},memorizeNowButton:{},label:{},language_label:{},done:{},spacer:{},keyboardBtnBar:{},enterQuoteWin:{},toolBar:{},languageToolbar:{},closeKeyboardBtn:{},slide_in:Titanium.UI.createAnimation({bottom:0}),slide_out:Titanium.UI.createAnimation({bottom:-251}),slide_in_top_btnbar:Titanium.UI.createAnimation({top:300}),slide_out_top_btnbar:Titanium.UI.createAnimation({top:600}),slide_out_btm_btnbar:Titanium.UI.createAnimation({bottom:-400}),fade_in:Titanium.UI.createAnimation({opacity:1}),fade_out:Titanium.UI.createAnimation({opacity:0}),_fontFamily:"Helvetica Neue",_buttonGradient:{type:"linear",colors:["#888888","#000001"],startPoint:{x:0,y:0},endPoint:{x:0,y:60},backFillStart:!1},_closeButtonGradient:{type:"linear",colors:["#FEFEFE","#898989"],startPoint:{x:0,y:0},endPoint:{x:0,y:60},backFillStart:!1},_toolbarGradient:{type:"linear",colors:["#888888","#000001"],startPoint:{x:0,y:0},endPoint:{x:0,y:60},backFillStart:!1},_disabledButtonGradient:{type:"linear",colors:["#CCCCCC","#888888"],startPoint:{x:0,y:0},endPoint:{x:0,y:60},backFillStart:!1},_uiWindowGradient:{type:"linear",colors:["#B4D109","#8DA701"],startPoint:{x:0,y:0},endPoint:{x:0,y:50},backFillStart:!1},_buttonBarGradient:{type:"linear",colors:["#565F6D","#8E96A1"],startPoint:{x:0,y:0},endPoint:{x:0,y:50},backFillStart:!1},buttonStyle:{},barStyle:{},_toolbarHeight:40,_closeBtnHeight:30,_closeBtnTop:5,_labelTop:45,_quoteTextTop:75,_quoteTextHeight:150,_authorTextTop:235,_sourceTextTop:275,_languageOptionsTop:315,_marginRight:10,_marginLeft:10,_textBoxMargin:20,_addBtnTop:355,_memorizeNowBtnTop:405};AddQuote.init=function(){AddQuote.quoteText=AddQuote._quotePromptText,AddQuote.authorText=AddQuote._authorPromptText,AddQuote.sourceText=AddQuote._sourcePromptText,AddQuote._width=Titanium.Platform.displayCaps.platformWidth,AddQuote._height=Titanium.Platform.displayCaps.platformHeight,AddQuote.win=Titanium.UI.createWindow({backgroundColor:"#000000",top:0,backgroundImage:"images/"+TiUtils.getOsName()+"-images/bg.png",statusBarStyle:Titanium.UI.iPhone.StatusBar.LIGHT_CONTENT,fullscreen:!0}),TiUtils.isiPad()&&(AddQuote._toolbarHeight=60,AddQuote._closeBtnHeight=40,AddQuote._closeBtnTop=10,AddQuote._marginRight=50,AddQuote._marginLeft=50,AddQuote._textBoxMargin=100,AddQuote._labelTop=65,AddQuote._quoteTextHeight=400,AddQuote._quoteTextTop=95,AddQuote._authorTextTop=505,AddQuote._sourceTextTop=545,AddQuote._languageOptionsTop=595,AddQuote._addBtnTop=635,AddQuote._memorizeNowBtnTop=685),AddQuote.buttonStyle=Titanium.UI.iPhone.SystemButtonStyle.PLAIN,AddQuote.barStyle=Titanium.UI.iPhone.SystemButtonStyle.BAR,Titanium.App.Properties.setString("currQuoteLanguage_preference","English"),Titanium.App.Properties.setString("languageRowIndex_preference","5"),AddQuote.setOrientation(),"edit"==Titanium.App.Properties.getString("quoteEditAction_preference")?(AddQuote.getQuote(),AddQuote._actionLabelText=AddQuote.ACTION_EDIT_LABEL_TEXT):AddQuote._actionLabelText=AddQuote.ACTION_ADD_LABEL_TEXT,AddQuote.draw(),AddQuote.addEventListeners(),AddQuote.win.orientationModes=[Titanium.UI.LANDSCAPE_LEFT,Titanium.UI.LANDSCAPE_RIGHT,Titanium.UI.PORTRAIT,Titanium.UI.UPSIDE_PORTRAIT]},AddQuote.draw=function(){AddQuote.toolBar=Ti.UI.createView({width:"auto",height:AddQuote._toolbarHeight,top:0,left:0,backgroundColor:"#000000",borderWidth:1,borderColor:"#666"}),AddQuote.closeButton=Ti.UI.createButton({title:"Cancel",width:100,height:AddQuote._closeBtnHeight,top:AddQuote._closeBtnTop,style:AddQuote.buttonStyle,backgroundGradient:AddQuote._closeButtonGradient,borderRadius:10,font:{fontSize:16,fontFamily:AddQuote._fontFamily,fontWeight:"bold"},color:"#545454"}),AddQuote.keyboardBtnBar=Ti.UI.createView({id:"buttonbar",height:40,top:0,backgroundColor:"#000000",style:AddQuote.barStyle,backgroundGradient:AddQuote._buttonBarGradient}),AddQuote.closeKeyboardBtn=Titanium.UI.createButton({title:"Close Keyboard",height:30,width:200,backgroundGradient:AddQuote._closeButtonGradient,borderRadius:10,font:{fontSize:16,fontFamily:AddQuote._fontFamily,fontWeight:"bold"},color:"#545454"}),AddQuote.closeKeyboardBtn.style=Titanium.UI.iPhone.SystemButtonStyle.PLAIN,AddQuote.closeKeyboardBtn.addEventListener("click",AddQuote.handleKeyboardClose),AddQuote.keyboardBtnBar.add(AddQuote.closeKeyboardBtn),AddQuote.enterQuoteWin=Titanium.UI.createScrollView({contentWidth:"auto",contentHeight:"auto",top:0,backgroundImage:"images/"+AddQuote.osName+"/bg.png",showVerticalScrollIndicator:!0,scrollType:"vertical",layout:"vertical"}),AddQuote.label=Titanium.UI.createLabel({text:AddQuote._actionLabelText,top:5,left:AddQuote._marginLeft,height:"auto",width:"auto",color:"#FFFFFF",font:{fontSize:16,fontFamily:AddQuote._fontFamily,fontWeight:"bold"}}),AddQuote.quoteTxt=Titanium.UI.createTextArea({value:AddQuote.quoteText,left:AddQuote._marginLeft,width:AddQuote._width-AddQuote._textBoxMargin,height:AddQuote._quoteTextHeight,top:5,editable:!0,borderRadius:10,font:{fontSize:16,fontFamily:AddQuote._fontFamily},suppressReturn:!1}),AddQuote.authorTxt=Titanium.UI.createTextField({value:AddQuote.authorText,left:AddQuote._marginLeft,width:AddQuote._width-20,height:30,top:5,editable:!0,borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,font:{fontSize:16,fontFamily:AddQuote._fontFamily},suppressReturn:!1}),AddQuote.sourceTxt=Titanium.UI.createTextField({value:AddQuote.sourceText,left:AddQuote._marginLeft,width:AddQuote._width-20,height:30,top:5,editable:!0,borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,font:{fontSize:16,fontFamily:AddQuote._fontFamily},suppressReturn:!1}),AddQuote.languageOptionHolder=Titanium.UI.createView({top:5,height:40,borderColor:"#000000",borderWidth:1}),AddQuote.drop_button=Titanium.UI.createImageView({backgroundImage:"images/dropdown-btn.png",width:25,height:25,top:4,left:220}),AddQuote.languageInfo_label=Titanium.UI.createLabel({text:"?",width:30,height:30,textAlign:"center",top:0,backgroundGradient:{type:"linear",colors:["#AAAAAA","#EEEEEE"],startPoint:{x:0,y:30},endPoint:{x:0,y:0},backFillStart:!0},backgroundColor:"#333"}),AddQuote.language_label=Titanium.UI.createTextField({value:"Quote language: "+AddQuote.quoteLanguage,left:AddQuote._marginLeft,width:250,height:30,top:0,enabled:!1,editable:!1,borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,font:{fontSize:14,fontFamily:AddQuote._fontFamily,color:"#000000"}}),AddQuote.quoteTxt.borderColor="#CCC",AddQuote.quoteTxt.borderWidth=2,AddQuote.languageOptionHolder.add(AddQuote.language_label),AddQuote.languageOptionHolder.add(AddQuote.drop_button),AddQuote.languageOptionHolder.add(AddQuote.languageInfo_label),AddQuote.done=Titanium.UI.createButton({title:"Done"}),AddQuote.languageToolbar=Titanium.UI.createToolbar({top:0,items:[AddQuote.done]}),AddQuote.language_picker_view=Titanium.UI.createView({height:251,bottom:-251}),AddQuote.language_picker=Titanium.UI.createPicker({top:43}),Titanium.UI.orientation>2&&Titanium.UI.orientation<5&&TiUtils.isiPhone()&&(AddQuote.languageToolbar.top=10,AddQuote.language_picker_view.height=200,AddQuote.language_picker.top=60),AddQuote.addButton=Titanium.UI.createButton({title:AddQuote.addButtonText,width:100,height:40,top:5,style:AddQuote.buttonStyle,borderRadius:10,font:{fontSize:16,fontFamily:AddQuote._fontFamily,fontWeight:"bold"},backgroundGradient:AddQuote._buttonGradient}),"edit"!=Titanium.App.Properties.getString("quoteEditAction_preference")&&AddQuote.disableSaveButton(),AddQuote.memorizeNowButton=Titanium.UI.createButton({title:"Save and memorize now >",width:250,height:40,top:5,style:AddQuote.buttonStyle,borderRadius:10,font:{fontSize:16,fontFamily:AddQuote._fontFamily,fontWeight:"bold"},backgroundGradient:AddQuote._buttonGradient}),AddQuote.disableMemorizeNowButton(),AddQuote.language_picker.selectionIndicator=!0,AddQuote.language_picker_view.add(AddQuote.languageToolbar),AddQuote.language_picker_view.add(AddQuote.language_picker),AddQuote.toolBar.add(AddQuote.closeButton),AddQuote.toolBar.add(AddQuote.closeButton),AddQuote.enterQuoteWin.add(AddQuote.toolBar),AddQuote.enterQuoteWin.add(AddQuote.label),AddQuote.enterQuoteWin.add(AddQuote.quoteTxt),AddQuote.enterQuoteWin.add(AddQuote.authorTxt),AddQuote.enterQuoteWin.add(AddQuote.sourceTxt),AddQuote.enterQuoteWin.add(AddQuote.languageOptionHolder),AddQuote.enterQuoteWin.add(AddQuote.addButton),Ti.API.info('Titanium.App.Properties.getString("quoteEditAction_preference")'),"add"===Titanium.App.Properties.getString("quoteEditAction_preference")&&AddQuote.enterQuoteWin.add(AddQuote.memorizeNowButton),AddQuote.win.add(AddQuote.enterQuoteWin),Ti.API.info("win.add(enterQuoteWin);"),AddQuote.resetLayout(),AddQuote.win.open(),TiUtils.isAndroid()&&(AddQuote.sourceTxt.height=40,AddQuote.authorTxt.height=40),AddQuote.enterQuoteWin.backgroundImage="images/bg-long.png"},AddQuote.enterQuote=function(e){Ti.API.info("enterQuote()");var t;AddQuote.quoteTxt.value.indexOf("\n")>-1&&AddQuote.isLogogramLanguage()===!1?(t=AddQuote.quoteTxt.value,Ti.API.info("enterQuote():START quoteString:"+t),t=t.replace(/^\s+|\s+$/g,""),t=t.replaceAll("\n","<br/> "),Ti.API.info("enterQuote():NOW quoteString:"+t)):t=AddQuote.quoteTxt.value;var o=Titanium.Database.open("iMemorizeDB");Ti.API.info("opened db"),o.execute("INSERT INTO MYQUOTES (QUOTE, AUTHOR, SOURCE, LANGUAGE, CHECKED) VALUES(?,?,?,?,?)",Titanium.Network.encodeURIComponent(t),Titanium.Network.encodeURIComponent(AddQuote.authorTxt.value),Titanium.Network.encodeURIComponent(AddQuote.sourceTxt.value),Titanium.App.Properties.getString("currQuoteLanguage_preference"),0),Ti.API.info("inserted into db");var d=o.execute("SELECT * FROM MYQUOTES ORDER BY ID DESC");Ti.API.info("The id of the last entered quote is : "+d.fieldByName("id"));var u=d.fieldByName("id"),i="UID-"+u;Ti.API.info("uniqueQuoteId : "+i),o.execute('UPDATE MYQUOTES SET QUOTE_ID = "'+i+'" WHERE ID = '+u),d=o.execute("SELECT * FROM MYQUOTES WHERE ID = "+u),Ti.API.info("The updated quote_id is : "+d.fieldByName("quote_id")),o.close(),AddQuote._action=e?AddQuote.ACTION_ADD_AND_MEMORIZE:AddQuote.ACTION_ADDED,AddQuote.buildSavedQuotes(),AddQuote.resetInputFields()},AddQuote.updateQuote=function(){Ti.API.info("updateQuote()");var e=AddQuote.quoteTxt.value,t=e;AddQuote.isLogogramLanguage()||(t=e.replaceAll("\n","<br/> "));var o;o=t===!1?e:t,Ti.API.info("updateQuote():"+t);var d=Titanium.Database.open("iMemorizeDB");d.execute('UPDATE MYQUOTES SET QUOTE = "'+Titanium.Network.encodeURIComponent(o)+'", AUTHOR="'+Titanium.Network.encodeURIComponent(AddQuote.authorTxt.value)+'", SOURCE="'+Titanium.Network.encodeURIComponent(AddQuote.sourceTxt.value)+'", LANGUAGE="'+Titanium.App.Properties.getString("currQuoteLanguage_preference")+'", CHECKED = 0 WHERE QUOTE_ID = "'+Titanium.App.Properties.getString("quoteID_preference")+'"'),d.close(),Ti.API.info("finished updateQuote()"),AddQuote._action=AddQuote.ACTION_UPDATED,AddQuote.buildSavedQuotes()},AddQuote.buildSavedQuotes=function(){Ti.API.info("buildSavedQuotes()");var e=Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory,"savedQuotes.xml");e.exists()||Titanium.API.info("File "+e.name+" does not exist yet."),Ti.API.info("writeable = "+e.writeable),Ti.API.info("readonly = "+e.readonly);var t=Titanium.Database.open("iMemorizeDB"),o=t.execute("SELECT * FROM MYQUOTES");Titanium.API.info("ROW COUNT = "+o.getRowCount());var d='<?xml version="1.0" encoding="utf-8"?><quotes><section name="Saved Quotes">';for(Titanium.API.info("start rows.isValidRow()");o.isValidRow();)Ti.API.info("The unique id is: "+o.fieldByName("quote_id")),d+="<quote id='"+o.fieldByName("quote_id")+"'><text>"+o.fieldByName("quote")+"</text><author>"+o.fieldByName("author")+"</author><reference>"+o.fieldByName("source")+"</reference><checked>"+o.fieldByName("checked")+"</checked><language>"+o.fieldByName("language")+"</language></quote>",Titanium.API.info("ID: "+o.field(0)+" Quote: "+o.fieldByName("quote")+" Language "+o.fieldByName("language")),o.next();Titanium.API.info("end rows.isValidRow()"),d+="</section></quotes>",o.close(),t.close(),e.write(d);var u=e.read();Titanium.App.fireEvent("myQuotesLoaded",{data:u.text}),AddQuote._action!=AddQuote.ACTION_ADD_AND_MEMORIZE&&TiUtils.showAlertDialog("Done","Your quote has been saved.",["OK"]),Titanium.App.fireEvent(AddQuote._action,{data:u.text}),Ti.API.info("After edit / add _action: "+AddQuote._action)},AddQuote.setLanguagePickerData=function(){Titanium.API.info("build the language data"),AddQuote.languagePref=Titanium.App.Properties.getString("currQuoteLanguage_preference"),Titanium.API.info("languagePref: "+AddQuote.languagePref);for(var e=0;e<AddQuote.languageArray.length;e++){var t=AddQuote.languageArray[e];Titanium.API.info("thisLang: "+t),AddQuote.languageArray[e]===AddQuote.languagePref?(Titanium.API.info("!!!!COOL: set selected for this one"),Titanium.App.Properties.setString("languageRowIndex_preference",e.toString()),AddQuote.language_picker_data.push(Titanium.UI.createPickerRow({title:t,selected:!0}))):(Titanium.API.info("Dont set selected for this one"),AddQuote.language_picker_data.push(Titanium.UI.createPickerRow({title:t})))}Titanium.API.info("END build the language data")},AddQuote.resetInputFields=function(){AddQuote.quoteTxt.value=AddQuote._quotePromptText,AddQuote.disableMemorizeNowButton(),AddQuote.disableSaveButton()},AddQuote.resetLayout=function(){TiUtils.isiPhone()&&(AddQuote.language_picker.top=AddQuote._orientation===AddQuote.ORIENTATION_PORTRAIT?43:32),AddQuote.enterQuoteWin.height=AddQuote._height,AddQuote.enterQuoteWin.width=AddQuote._width,AddQuote.toolBar.width=AddQuote._width,AddQuote.quoteTxt.width=AddQuote._width-AddQuote._textBoxMargin,AddQuote.authorTxt.width=AddQuote._width-AddQuote._textBoxMargin,AddQuote.sourceTxt.width=AddQuote._width-AddQuote._textBoxMargin,AddQuote.drop_button.left=225,AddQuote.languageInfo_label.left=270,AddQuote.keyboardOpened&&AddQuote.positionKeyboardButtonBar()},AddQuote.getQuote=function(){Ti.API.info("getQuote()");var e=Titanium.App.Properties.getString("quoteID_preference"),t=Titanium.Database.open("iMemorizeDB"),o=t.execute('SELECT * FROM MYQUOTES WHERE QUOTE_ID = "'+e+'"');Ti.API.info("Edit this quote = "+o.fieldByName("quote"));var d,u=Titanium.Network.decodeURIComponent(o.fieldByName("quote"));d=u.indexOf("<br/>")>-1?u.replaceAll("<br/>","\n"):u,AddQuote.quoteText=d,AddQuote.authorText=Titanium.Network.decodeURIComponent(o.fieldByName("author")),AddQuote.sourceText=Titanium.Network.decodeURIComponent(o.fieldByName("source")),AddQuote.quoteLanguage=Titanium.Network.decodeURIComponent(o.fieldByName("language")),Titanium.App.Properties.setString("currQuoteLanguage_preference",AddQuote.quoteLanguage),t.close(),AddQuote.addButtonText="Save",AddQuote.labelText="Edit Quote"},AddQuote.addEventListeners=function(){AddQuote.quoteTxt.addEventListener("focus",AddQuote.handleQuoteTxtFocus),AddQuote.quoteTxt.addEventListener("change",AddQuote.handleQuoteTxtChange),AddQuote.authorTxt.addEventListener("blur",AddQuote.handleAuthorTxtBlur),AddQuote.authorTxt.addEventListener("focus",AddQuote.handleAuthorTxtFocus),AddQuote.authorTxt.addEventListener("blur",AddQuote.handleAuthorTxtBlur),AddQuote.sourceTxt.addEventListener("focus",AddQuote.handleSourceTxtFocus),AddQuote.sourceTxt.addEventListener("blur",AddQuote.handleSourceTxtBlur),AddQuote.drop_button.addEventListener("click",AddQuote.handleDropButtonClick),AddQuote.done.addEventListener("click",AddQuote.handleDoneButtonClick),AddQuote.addButton.addEventListener("click",AddQuote.handleAddButtonClick),AddQuote.closeButton.addEventListener("click",AddQuote.handleCloseButtonClick),AddQuote.memorizeNowButton.addEventListener("click",AddQuote.handleMemorizeNowButtonClick),Ti.Gesture.addEventListener("orientationchange",AddQuote.orientationChangeListener),AddQuote.languageInfo_label.addEventListener("click",AddQuote.handleLanguageQuestionClick)},AddQuote.blurTextFields=function(){AddQuote.quoteTxt.blur(),AddQuote.authorTxt.blur(),AddQuote.sourceTxt.blur()},AddQuote.handleDropButtonClick=function(){Titanium.API.info("show the language dropdown"),AddQuote.resetLayout(),AddQuote.setLanguagePickerData(),AddQuote.language_picker.add(AddQuote.language_picker_data),AddQuote.win.add(AddQuote.language_picker_view),AddQuote.language_picker.setSelectedRow(0,Number(Titanium.App.Properties.getString("languageRowIndex_preference"))),AddQuote.language_picker_view.animate(AddQuote.slide_in),AddQuote.blurTextFields()},AddQuote.handleLanguageQuestionClick=function(){var e=Titanium.UI.createAlertDialog({title:"Language Selection",message:"The language selection allows the application to determine how your quote needs to be displayed. This includes texts like Arabic that display right to left instead of left to right, or if the quote requires any special characters.",buttonNames:["Done"]});e.show()},AddQuote.handleDoneButtonClick=function(){Titanium.API.info("language_label.value: "+AddQuote.language_picker.getSelectedRow(0).title),TiUtils.isAndroid()?(AddQuote.language_label.text="Quote language: "+AddQuote.language_picker.getSelectedRow(0).title,AddQuote.win.remove(AddQuote.language_picker_view)):(AddQuote.language_picker_view.animate(AddQuote.slide_out),AddQuote.language_label.value="Quote language: "+AddQuote.language_picker.getSelectedRow(0).title),Titanium.App.fireEvent("languageChanged",{data:AddQuote.language_picker.getSelectedRow(0).title}),Titanium.App.Properties.setString("currQuoteLanguage_preference",AddQuote.language_picker.getSelectedRow(0).title),AddQuote.setLanguagePickerData(),AddQuote.resetLayout()},AddQuote.handleAddButtonClick=function(){Titanium.API.info("addButton clicked"),AddQuote.win.title="Saved quote",""!==AddQuote.quoteTxt.value&&AddQuote.quoteTxt.value!==AddQuote._quotePromptText?"edit"==Titanium.App.Properties.getString("quoteEditAction_preference")?(Titanium.API.info("addButton clicked: updateQuote()"),AddQuote.updateQuote()):(Titanium.API.info("addButton clicked: enterQuote()"),AddQuote.enterQuote()):AddQuote.showAlertDialog("","Please enter a quote.",["OK"]),AddQuote.blurTextFields()},AddQuote.handleCloseButtonClick=function(){Titanium.API.info("clicked close"),Titanium.App.fireEvent("closeAddQuote",{}),AddQuote.blurTextFields()},AddQuote.handleMemorizeNowButtonClick=function(){""!==AddQuote.quoteTxt.value&&AddQuote.quoteTxt.value!==AddQuote._quotePromptText?(AddQuote.enterQuote(!0),AddQuote.handleCloseButtonClick()):TiUtils.showAlertDialog("","You must enter a quote before memorizing it. If you have already entered the quote you want to memorize, go to the Saved Quotes menu and select it from there",["OK"])},AddQuote.handleQuoteTxtFocus=function(){AddQuote.quoteTxt.value===AddQuote._quotePromptText&&(AddQuote.quoteTxt.value=""),Titanium.API.info("focused on quoteTxt"),AddQuote.showKeyboardButtonBar()},AddQuote.handleQuoteTxtChange=function(){""!==AddQuote.quoteTxt.value&&AddQuote.quoteTxt.value!==AddQuote._quotePromptText?(AddQuote.enableMemorizeNowButton(),AddQuote.enableSaveButton()):(AddQuote.disableMemorizeNowButton(),AddQuote.disableSaveButton())},AddQuote.enableMemorizeNowButton=function(){AddQuote.memorizeNowButton.enabled=!0,AddQuote.memorizeNowButton.opacity=1},AddQuote.disableMemorizeNowButton=function(){AddQuote.memorizeNowButton.enabled=!1,TiUtils.isAndroid()||(AddQuote.memorizeNowButton.opacity=".5")},AddQuote.enableSaveButton=function(){AddQuote.addButton.enabled=!0,AddQuote.addButton.opacity=1},AddQuote.disableSaveButton=function(){AddQuote.addButton.enabled=!1,TiUtils.isAndroid()||(AddQuote.addButton.opacity=".5")},AddQuote.handleAuthorTxtBlur=function(){Titanium.API.info("quoteTxt blur")},AddQuote.handleAuthorTxtFocus=function(){AddQuote.authorTxt.value===AddQuote._authorPromptText&&(AddQuote.authorTxt.value=""),Titanium.API.info("authorText focus"),AddQuote.showKeyboardButtonBar()},AddQuote.handleAuthorTxtBlur=function(){Titanium.API.info("authorText blur")},AddQuote.handleSourceTxtFocus=function(){AddQuote.sourceTxt.value===AddQuote._sourcePromptText&&(AddQuote.sourceTxt.value=""),Titanium.API.info("sourceTxt focus"),AddQuote.showKeyboardButtonBar()},AddQuote.handleSourceTxtBlur=function(){Titanium.API.info("sourceTxt blur :"+AddQuote.quoteTxt.value),AddQuote.resetLayout()},AddQuote.handleKeyboardButtonBarClick=function(){AddQuote.blurTextFields(),AddQuote.hideKeyboardButtonBar()},AddQuote.orientationChangeListener=function(){AddQuote._width=Titanium.Platform.displayCaps.platformWidth,AddQuote._height=Titanium.Platform.displayCaps.platformHeight-AddQuote.iPhoneStatusBarHeight,AddQuote.setOrientation(),AddQuote.resetLayout()},AddQuote.setOrientation=function(){AddQuote.currOrientation=Titanium.Gesture.orientation,AddQuote.currOrientation<3?AddQuote._orientation=AddQuote.ORIENTATION_PORTRAIT:AddQuote.currOrientation<5&&AddQuote.currOrientation>=3&&(AddQuote._orientation=AddQuote.ORIENTATION_LANDSCAPE)},AddQuote.showKeyboardButtonBar=function(){Titanium.API.info("showKeyboardButtonBar()1"),TiUtils.isiPad()||TiUtils.isAndroid()||AddQuote.keyboardOpened||(AddQuote.win.add(AddQuote.keyboardBtnBar),AddQuote.positionKeyboardButtonBar(),AddQuote.keyboardOpened=!0),Titanium.API.info("showKeyboardButtonBar()2")},AddQuote.hideKeyboardButtonBar=function(){Titanium.API.info("AddQuote.hideKeyboardButtonBar"),AddQuote.win.remove(AddQuote.keyboardBtnBar),AddQuote.keyboardOpened=!1,AddQuote.resetLayout()},AddQuote.positionKeyboardButtonBar=function(){AddQuote.keyboardBtnBar.bottom=AddQuote._orientation===AddQuote.ORIENTATION_PORTRAIT?AddQuote.KEYBOARD_BOTTOM_PORTRAIT:AddQuote.KEYBOARD_BOTTOM_LANDSCAPE,TiUtils.isAndroid()&&(AddQuote.keyboardBtnBar.top=100)},AddQuote.handleKeyboardClose=function(){AddQuote.blurTextFields(),Titanium.API.info("handleKeyboardClose()"),AddQuote.hideKeyboardButtonBar()},AddQuote.showAlertDialog=function(e,t,o){var d=Titanium.UI.createAlertDialog({title:e,message:t,buttonNames:o});d.show()},String.prototype.replaceAll=function(e,t){var o=this,d=o.indexOf(e);if(d>-1){for(;-1!=d;)o=o.replace(e,t),d=o.indexOf(e);return o}return!1},AddQuote.isLogogramLanguage=function(){var e=Titanium.App.Properties.getString("currQuoteLanguage_preference");e=e.toUpperCase();var t=!1;return("CHINESE"===e||"JAPANESE"===e||"KOREAN"===e||"VIETNAMESE"===e)&&(t=!0),t},AddQuote.showQuoteEditor=function(){AddQuote.init(),AddQuote.win.visible=!0},AddQuote.hideQuoteEditor=function(){AddQuote.win.close(),App.showQuoteEditorInited=!1};